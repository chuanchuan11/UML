> 时序图概述   

**定义**

  >   交互图是一种表示对象之间以及对象与系统外部的参与者actor之间动态联系的图形文档。

  >   序列图是对对象之间传送消息的时间顺序的可视化表示。

  >   **序列图将交互关系表示为一个二维图，**显示了一系列的对象和在这些对象之间发送和接受消息的先后顺序。顺序图中水平方向为对象维，沿水平方向排列参与交互的对象；竖向方向为时间维，沿垂直向下方向按时间递增顺序列出各对象所发出和接收的消息。

**序列图示例**

![image](https://user-images.githubusercontent.com/42632290/141611183-b28e679e-3e49-44fe-bb64-1cd37144a225.png)  

  >   注：虚线表示，此时对象不处于激活状态；双道线，表示对象处于激活状态；消息使用从一个对象的生命线到另一个对象的生命线的箭头表示。

**序列图的作用：**

  >   和类图相互补充，表示对象之间的消息交互  

**序列图与类图的关系**

  >   描述系统静态结构的类图和描述系统动态行为的交互图之间要保持一致性：

    -   交互图中的生命线对应于类图中的类  

    -   交互图中有消息交互的生命线，对应在类图中的两个类之间应该有一定的关联  

    -   交互图中的消息对应于类图中接受该消息生命线所对应的类的某个操作  

**序列图的组成：**

  >   序列图是由对象、生命线、激活和消息等构成的。

![image](https://user-images.githubusercontent.com/42632290/141611459-a237fdf3-9da9-4323-a702-e5f6e0233e5b.png)  

  序列图的详细描述

**生命线**

  矩形框+虚线

![image](https://user-images.githubusercontent.com/42632290/141611469-9f1d3f04-76d6-47fe-ab77-1e55e0add43e.png)  

**控制焦点（也叫作激活）**

  >   对象生命周期，矩形表示对象处于激活状态。对象获得CPU控制权。完成工作后，释放控制权，对象处于空闲状态，成为去激活。

    -   表示方法：在生命线上用细长的矩形框来表示。矩形框最上端表示处理的开始时点，矩形框的最下端表示处理的结束时点。

**消息**

    用来描述对象之间所进行的通信。发送消息用实线箭头，返回消息用虚线箭头。  

    消息可以分为以下类别：

-   **同步消息**：对象发送消息后，等到接收消息的对象执行完所有操作才能继续执行自己的操作。实心箭头。

-   **异步消息**：发送消息的对象发送后，不用等待接受对象，继续执行自己的操作。空心箭头

-   **返回消息**：接受消息的对象，返回数据并交回控制权。

![image](https://user-images.githubusercontent.com/42632290/141611534-89d11711-a221-4180-95a2-c839dfd15f80.png)  

-   **销毁对象：--\>×**

![image](https://user-images.githubusercontent.com/42632290/141611544-16df0aea-b322-4290-a7ce-2aa1b2a9ede9.png)  

-   **递归调用：--\>×**

![image](https://user-images.githubusercontent.com/42632290/141611954-749e1709-0485-47e5-9e99-e0b1eb941b5c.png)  

**分支结构**

  > alt和opt表示分支结构。alt表示多选一[if... elseif... esle...]，opt表示判断单选一[if...]

    抉择（Alt）：用来指明在两个或更多的消息序列之间的互斥的选择，相当于经典的if..else..。

![image](https://user-images.githubusercontent.com/42632290/141612265-a9c0e253-7f9f-447b-8091-a91659770c62.png)

    选项（Opt）：包含一个可能发生或不发生的序列，相当于if
    
    ![image](https://user-images.githubusercontent.com/42632290/141612317-dae6798b-bc53-4595-822d-471289983420.png)  

**循环结构**

  > loop表示循环  
   
    片段重复一定次数。 可以在临界中指示片段重复的条件  

![image](https://user-images.githubusercontent.com/42632290/141612341-87ff24a5-b36e-4025-9888-ae9b89233dec.png)  

**并发控制**

  > 当完成一个复杂任务需要的处理时间比希望的长的时候，一些系统采用并行处理进程的各部分。当创造一个序列图，显示并行处理活动的时候，需要使用并行组合碎片元件  

![image](https://user-images.githubusercontent.com/42632290/141612367-36536bd0-f4ad-479d-bb28-42bd157f63a3.png)  

**consider消息列表**

只有消息列表中的消息才能被执行。通过asser组合区进行判断。

序列图：

![clipboard.png](media/f09d9db486e0f4ba28221e4b88743dfc.png)

**ignore消息列表**

ignore消息列表中的信息被忽略。通过assert组合区进行判断。

序列图：（以后补充）

**break**

与循环操作配合使用，如果执行，则跳出循环语句，表示在给定条件满足时退出交互序列。

序列图：（以后补充）

**critical**

组合临界区，在临界区中的操作要么全被直行，要么都不执行。为了保持事务的原子性。

序列图：（以后补充）

**交互调用ref**

>   ref可以将一个庞大而复杂的序列图分解为多个ref碎片，从而减轻了为复杂系统创建大型序列图所带来的维护困难  

>   序列图：在框架的head部分用关键字“ref”进行标识，框架中央指明要调用的交互序列名称。方便合理组织顺序图中的元素，简化图中的交互调用关系，增强复杂交互关系的可读性和可维护性。

![image](https://user-images.githubusercontent.com/42632290/141612040-4a31a11a-130d-4e49-8766-087eab93d0b6.png)  

**总结： ** 

组合片段用来解决交互执行的条件和方式，它允许在序列图中直接表示逻辑组件，用于通过指定条件或子进程的应用区域，为任何生命线的任何部分定义特殊条件和子进程。组合片段共有13种，名称及含义如下：

![image](https://user-images.githubusercontent.com/42632290/141612454-0315ac0b-df14-4e7f-9dbb-cdb712bb52b6.png)


